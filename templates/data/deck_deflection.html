{% extends 'main.html' %}
{% load static %}

{% block extend_head %}
    <title>IBMS Day Report</title>
    <link href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" 
    crossorigin="anonymous">

{% endblock %}

{% block content %}

<form method="POST" action="">
    {% csrf_token %}
    <div style = "
            width: 35%;
            height: 5%;
            display: flex;
            align-items: center;
            ">
        <h2 style = "
            width: auto;
            height: 10%;
            display: flex;
            align-items: center;
            padding-right: 50%;">Girder Deflection</h2>

        <select name="interval" class="form-select d-sm-flex" aria-label="Default select example"
        style = "
            height: auto;
            width: auto;
            display: flex; 
            padding-left: 10%;">
            <option disabled selected="true">Select Interval Range</option>
            <option value="1">Day</option>
            <option value="2">Week</option>
            <option value="3">Month</option>
            <option value="4">Year</option>
        </select>
        <br>
        <button class="btn btn-primary" type="submit" 
        style = "height: auto;
        width:  auto;
        display: flex; 
        position: relative;" >Filter</button>
    </div>
    <br>
    {% if interval == "day" %}
        <br>
        <h3>{{head}} Data</h3>
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Time</th>
                    <th>Displacement</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in disp_items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.created.time }}</td>
                        <td>{{ item }}</td>
                        {% if item.status %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% elif item.condition %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% else %}
                            <td style="color: #ffffff" class="badge bg-success">Ok</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>#</th>
                    <th>Time</th>
                    <th>Displacement</th>
                    <th>Status</th>
                </tr>
            </tfoot>
        </table>
    {% elif interval == "week" %}
        <br>
        <h3>{{head}} Data</h3>
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Day</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in disp_items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.created.date }}</td>
                        <td>{{ item }}</td>
                        {% if item.status %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% elif item.condition %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% else %}
                            <td style="color: #ffffff" class="badge bg-success">Ok</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>#</th>
                    <th>Day</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </tfoot>
        </table>
    {% elif interval == "month" %}
        <br>
        <h3>{{head}} Data</h3>
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Month</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in disp_items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        {% if item.created.month %}
                            <td>{{ item.created.month }}</td>
                        {% endif %}
                        <td>{{ item }}</td>
                        {% if item.status %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% elif item.condition %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% else %}
                            <td style="color: #ffffff" class="badge bg-success">Ok</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>#</th>
                    <th>Month</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </tfoot>
        </table>
    {% elif interval == "year" %}
        <br>
        <h3>{{head}} Data</h3>
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Year</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in disp_items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.created.year }}</td>
                        <td>{{ item }}</td>
                        {% if item.status %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% elif item.condition %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% else %}
                            <td style="color: #ffffff" class="badge bg-success">Ok</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>#</th>
                    <th>Year</th>
                    <th>Average Displacement</th>
                    <th>Status</th>
                </tr>
            </tfoot>
        </table>
    {% else %}
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Time</th>
                    <th>Displacement</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for item in disp_items %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ item.created.time }}</td>
                        <td>{{ item }}</td>
                        {% if item.status %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% elif item.condition %}
                            <td style="color: #ffffff" class="badge bg-danger">Not Ok</td>
                        {% else %}
                            <td style="color: #ffffff" class="badge bg-success">Ok</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th>#</th>
                    <th>Time</th>
                    <th>Displacement</th>
                    <th>Status</th>
                </tr>
            </tfoot>
        </table>
    {% endif %}
</form>
{% endblock content %}

{% block extend_footer %}
<!-- Custom JavaScripts -->
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" 
crossorigin="anonymous"></script>

<script>
    // $(document).ready(function() {
    $('#example').DataTable( {
        
    } );
    // } );

</script>

{% endblock %}